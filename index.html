---
layout: null
---
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Su Squares, cute squares you own and personalize</title>
  <meta name="description" content="The first ERC-721 NFT. Cute squares you own and personalize.">
  <link rel="canonical" href="https://tenthousandsu.com" />
  <link rel="stylesheet" href="assets/main.css?20210926">
  {% include nav-menu-head.html %}
  {% include alert-modal-head.html %}
  {% include offline-modal-head.html %}
  <link rel="stylesheet" href="/assets/leaving-modal/modal.css">
  <script src="/assets/leaving-modal/leaving-modal.js"></script>
</head>

<body>
  {% include nav-header.html %}

  <article>
    <h1 class="home-title">The first <span class="no-break">ERC-721</span> NFT</h1>
    <p>Click below to mint an available Su Square (0.5 ETH).</p>
    <a id="wheretogo" class="map-container" href="#" target="_blank">
      <div class="map-wrapper">
        <img id="theImage" class="map-image" src="build/wholeSquare.webp" alt="All Su Squares">
        <div id="position" class="map-position"></div>
        <div id="tooltip" class="map-tooltip"></div>
        <div id="electric-fence" class="map-fence"></div>
      </div>
    </a>
  </article>

  <article class="newly-feed">
    <section id="newly-minted" class="newly-feed__section">
      <strong class="newly-feed__heading">Newly minted</strong>
      <div class="newly-feed__items"></div>
    </section>
    <section id="newly-personalized" class="newly-feed__section">
      <strong class="newly-feed__heading">Latest personalized</strong>
      <div class="newly-feed__items"></div>
    </section>
  </article>

  <footer>
    <small>
      No cookies. No analytics. Not responsible for content of linked sites. Images shown on homepage are &copy; their
      respective owners. This image refreshes <a target="_blank"
        href="https://github.com/su-squares/tenthousandsu.com/actions/workflows/load-from-blockchain.yml">hourly</a>. To
      the extent possible under law, Su Entriken has waived
      all copyright and related or neighboring rights to the TenThousandSu.com website. This work is published from the
      United States.
    </small>
  </footer>
  <script>
    let positionSquareNumber = 1;
    var squarePersonalizations = [];
    var squareExtra = [];

    // Animate the electric fence
    let fence = new Set();
    let litUpEdge = new Set();
    let wasEverLitUp = new Set();
    const whereToGoAnchor = document.getElementById("wheretogo");

    const squarePersonalizationsPromise = fetch("build/squarePersonalizations.json").then(response => response.json());
    const squareExtraPromise = fetch("build/squareExtra.json").then(response => response.json());

    Promise.all([squarePersonalizationsPromise, squareExtraPromise])
      .then(([personalizations, extra]) => {
        squarePersonalizations = personalizations; /* [title, href] or null */
        squareExtra = extra; /* [mintedBlock, updatedBlock, mainIsPersonalized, version */

        // Start fence animation
        lightUpFence(new Set([1]));

        // Show newly minted and personalized Squares
        const newlyMintedSection = document.getElementById("newly-minted");
        const newlyPersonalizedSection = document.getElementById("newly-personalized");
        const newlyMintedList = newlyMintedSection.querySelector(".newly-feed__items");
        const newlyPersonalizedList = newlyPersonalizedSection.querySelector(".newly-feed__items");
        const mostRecentMintedSquares = squareExtra
          .map((extraData, index) => [index, extraData])
          .filter(([index, extraData]) => extraData !== null)
          .sort((a, b) => b[1][0 /* mintedBlock */] - a[1][0])
          .slice(0, 5);
        mostRecentMintedSquares.forEach(([index, extraData]) => {
          const row = Math.floor((index - 1) / 100);
          const col = (index - 1) % 100;
          const squareNumber = index + 1;
          newlyMintedSection.insertAdjacentHTML("beforeend",
            `<a style="display:flex; flex-direction: column; align-items: center; justify-content: center; flex: 1 1 0" href="https://tenthousandsu.com/square#${squareNumber}">
              <div style="background: url('https://tenthousandsu.com/build/wholeSquare.webp'); height: 10px; width: 10px; background-position-x: ${-col * 10}px; background-position-y: ${-row * 10}px; display: inline-block; zoom: 5; image-rendering: pixelated;"></div>
              <p>#${squareNumber}</p>
            </a>`
          );
        });
        const mostRecentPersonalizedSquares = squareExtra
          .map((extraData, index) => [index, extraData])
          .filter(([index, extraData]) => extraData !== null)
          .filter(([index, extraData]) => extraData[1] !== extraData[0])
          .sort((a, b) => b[1][1 /* updatedBlock */] - a[1][1])
          .slice(0, 5);
        mostRecentPersonalizedSquares.forEach(([index, extraData]) => {
          const row = Math.floor((index) / 100);
          const col = (index) % 100;
          const squareNumber = index + 1;
          newlyPersonalizedSection.insertAdjacentHTML("beforeend",
            `<a style="display:flex; flex-direction: column; align-items: center; justify-content: center; flex: 1 1 0" href="https://tenthousandsu.com/square#${squareNumber}">
              <div style="background: url('https://tenthousandsu.com/build/wholeSquare.webp'); height: 10px; width: 10px; background-position-x: ${-col * 10}px; background-position-y: ${-row * 10}px; display: inline-block; zoom: 5; image-rendering: pixelated;"></div>
              <p>#${squareNumber}</p>
            </a>`
          );
        });
      });

    const GRID_DIMENSION = 100;

    function getCellSize() {
      const rect = document.getElementById("theImage").getBoundingClientRect();
      return rect.width ? rect.width / GRID_DIMENSION : 10;
    }

    function setPosition(squareNumber) {
      positionSquareNumber = squareNumber;
      const positionDiv = document.getElementById("position");
      const tooltipDiv = document.getElementById("tooltip");
      if (!whereToGoAnchor) {
        return;
      }
      const cellSize = getCellSize();
      const col = (squareNumber - 1) % GRID_DIMENSION;
      const row = Math.floor((squareNumber - 1) / GRID_DIMENSION);

      if (!squarePersonalizations[squareNumber - 1]) {
        document.getElementById("theImage").style.cursor = "pointer";
        tooltipDiv.textContent = "Square #" + squareNumber + " is available for sale, click to buy.";
        whereToGoAnchor.href = "buy?square=" + squareNumber;
      } else if (!squarePersonalizations[squareNumber - 1][0] && !squarePersonalizations[squareNumber - 1][1]) {
        document.getElementById("theImage").style.cursor = "not-allowed";
        tooltipDiv.textContent = "Square #" + squareNumber + " WAS PURCHASED BUT NOT YET PERSONALIZED";
        whereToGoAnchor.removeAttribute("href");
      } else {
        document.getElementById("theImage").style.cursor = "pointer";
        tooltipDiv.textContent = "Square #" + squareNumber + " " + squarePersonalizations[squareNumber - 1][0];
        whereToGoAnchor.href = squarePersonalizations[squareNumber - 1][1];
      }

      positionDiv.style.width = cellSize + "px";
      positionDiv.style.height = cellSize + "px";
      positionDiv.style.left = (col * cellSize) + "px";
      positionDiv.style.top = (row * cellSize) + "px";
      positionDiv.style.display = "block";

      tooltipDiv.style.left = positionDiv.style.left;
      tooltipDiv.style.top = (row * cellSize + cellSize * 3) + "px";
      tooltipDiv.style.display = "block";
    }

    window.addEventListener("resize", () => {
      if (document.getElementById("tooltip").style.display === "block") {
        setPosition(positionSquareNumber);
      }
    });

    function clearSelection() {
      const positionDiv = document.getElementById("position");
      const tooltipDiv = document.getElementById("tooltip");
      positionDiv.style.display = "none";
      tooltipDiv.style.display = "none";
    }

    document.getElementById("theImage").addEventListener("mousemove", (e) => {
      const theImage = document.getElementById("theImage");
      const rect = theImage.getBoundingClientRect(); // Get the bounding rectangle of the image
      const cellSize = getCellSize();
      const x = Math.min(Math.max(Math.floor((e.clientX - rect.left) / cellSize), 0), GRID_DIMENSION - 1); // Adjust by element's left position
      const y = Math.min(Math.max(Math.floor((e.clientY - rect.top) / cellSize), 0), GRID_DIMENSION - 1); // Adjust by element's top position
      const squareNumber = x + y * GRID_DIMENSION + 1;
      setPosition(squareNumber);
    });
    document.getElementById("theImage").addEventListener("mouseleave", clearSelection);

    document.addEventListener("keydown", (e) => {
      const key = e.key.toLowerCase();
      if (key === 'w' || key === ',' || key === 'arrowup') {
        // Move up
        if (positionSquareNumber > GRID_DIMENSION) setPosition(positionSquareNumber - GRID_DIMENSION);
        event.preventDefault(); // Prevent scrolling
      } else if (key === 'a' || key === 'a' || key === 'arrowleft') {
        // Move left
        if (positionSquareNumber % GRID_DIMENSION !== 1) setPosition(positionSquareNumber - 1);
      } else if (key === 's' || key === 'o' || key === 'arrowdown') {
        // Move down
        if (positionSquareNumber <= GRID_DIMENSION * (GRID_DIMENSION - 1)) setPosition(positionSquareNumber + GRID_DIMENSION);
        event.preventDefault(); // Prevent scrolling
      } else if (key === 'd' || key === 'e' || key === 'arrowright') {
        // Move right
        if (positionSquareNumber % GRID_DIMENSION !== 0) setPosition(positionSquareNumber + 1);
      } else if (key === 'enter') {
        // Trigger click for highlighted square
        if (whereToGoAnchor && whereToGoAnchor.hasAttribute("href")) {
          whereToGoAnchor.click();
        }
      }
    });

    function handleWhereToGoClick(event) {
      if (!whereToGoAnchor) {
        return;
      }

      const href = whereToGoAnchor.getAttribute("href");
      if (!href || href === "#") {
        return;
      }

      const modal = window.SuLeavingModal;
      if (!modal || typeof modal.shouldWarnForUrl !== "function" || typeof modal.show !== "function") {
        return;
      }

      let destination;
      try {
        destination = new URL(href, window.location.href);
      } catch (error) {
        return;
      }

      if (!modal.shouldWarnForUrl(destination)) {
        return;
      }

      event.preventDefault();
      modal.show(destination, whereToGoAnchor.getAttribute("target") || "_self");
    }

    if (whereToGoAnchor) {
      whereToGoAnchor.addEventListener("click", handleWhereToGoClick);
    }

    function lightUpFence(edge) {
      litUpEdge.forEach(s => {
        const element = document.getElementById("electric-fence-" + s);
        if (element && element.parentNode) {
          element.parentNode.removeChild(element);
        }
      });
      litUpEdge.clear();
      let nextEdge = new Set();
      edge.forEach((square) => {
        wasEverLitUp.add(square);
        const element = document.createElement("div");
        element.id = "electric-fence-" + square;
        element.style.pointerEvents = "none";
        element.style.position = "absolute";
        element.style.left = ((square - 1) % GRID_DIMENSION) + "%";
        element.style.top = Math.floor((square - 1) / GRID_DIMENSION) + "%";
        element.style.width = "1%";
        element.style.height = "1%";
        element.style.background = "#ffd700";
        element.style.opacity = "0.25";
        document.getElementById("electric-fence").appendChild(element);
        if (squarePersonalizations[square - 1] !== null) {
          litUpEdge.add(square);
          if (square > GRID_DIMENSION && !wasEverLitUp.has(square - GRID_DIMENSION)) {
            nextEdge.add(square - GRID_DIMENSION);
          }
          if (square <= GRID_DIMENSION * (GRID_DIMENSION - 1) && !wasEverLitUp.has(square + GRID_DIMENSION)) {
            nextEdge.add(square + GRID_DIMENSION);
          }
          if (square % GRID_DIMENSION != 1 && !wasEverLitUp.has(square - 1)) {
            nextEdge.add(square - 1);
          }
          if (square % GRID_DIMENSION != 0 && !wasEverLitUp.has(square + 1)) {
            nextEdge.add(square + 1);
          }
        } else {
          fence.add(square);
        }
      });
      if (nextEdge.size > 0) {
        setTimeout(() => { lightUpFence(nextEdge) }, 25);
      }
    }
  </script>
</body>

</html>
