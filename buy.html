---
layout: null
title: Buy a Square and claim a spot on the homepage
description: "Purchase Su Squares NFTs on Ethereum that you can personalize to appear on the TenThousandSu.com homepage billboard."
permalink: /buy
image: "{{ site.baseurl }}/assets/images/su-OG.png"
---
<!doctype html>
<html lang="en" class="mint-page">

<head>
  <script>window.SITE_BASEURL = "{{ site.baseurl }}";</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% include pwa-meta-tags.html %}
  {% seo %}
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/billboard/billboard.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/buy.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/square-lookup/styles.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/web3/tx/styles.css">
  {% include nav-menu-head.html %}
  {% include alert-modal-head.html %}
  {% include offline-modal-head.html %}
  {% include jsonld-nav.html %}
  {% include jsonld/webpage.html %}
</head>

<body>
  {% include nav-header.html desktop_button_one_label="Personalize" desktop_button_one_href="/personalize-modern" %}
  <article class="lead">
    <h1>Mint Su Squares <span id="square-number-with-number-sign"></span></h1>
    <p><em>If you have a question, please mail <a
          href="mailto:Su@TenThousandSu.com?subject=Sales%20question&body=HiSu,%20Please%20help!%20I%20have%20a%20question%20about%20Su%20Squares.">Su@TenThousandSu.com</a>.</em>
    </p>

    <div id="pick-a-square">
      <h2>Which Square would you like?</h2>
      <p><strong>Square number</strong> (between 1 and 10,000)</p>
      <div class="square-lookup__controls">
        <input id="square-number" type="number" min="1" max="10000" required style="width:7em" placeholder="e.g. 2345">
        <div class="square-lookup__actions">
          <button id="square-choose-list" type="button">Choose from list</button>
          <button id="square-choose-billboard" type="button">Choose from Billboard</button>
        </div>
      </div>
      <button id="select-square" type="button" class="btn btn-lg">Select Square</button>
    </div>

    <div id="mint-selected-square" style="display:none">
      <p>Please connect your wallet using the button above and then click mint below.</p>
      <div class="wallet-actions">
        <button id="open-wallet-app" type="button" class="btn btn-lg">Open mobile wallet</button>
        <button id="mint" type="button" class="btn btn-lg">Mint Square</button>
      </div>
    </div>

    <div id="mint-success" style="display:none">
      <p>Your Square is minted.</p>
      <div class="wallet-actions">
        <a id="personalize-now" class="btn btn-lg" href="{{ site.baseurl }}/personalize-modern">Personalize Now</a>
        <button id="mint-another" type="button" class="btn btn-lg">Mint Another</button>
      </div>
    </div>

    <p>Your purchase is subject to the terms, and your understanding of, our <a
        href="{{ site.baseurl }}/white-paper">white paper</a>.</p>

    <div id="tx-fixture"></div>
  </article>

  <footer>
    <small>
      No cookies. No analytics. To the extent possible under law, Su Entriken has waived all copyright and related or
      neighboring rights to the TenThousandSu.com website. This work is published from the United States.
    </small>
  </footer>

  <script type="module">
    import {
      ensureConnected,
      ensureCorrectNetwork,
      isMobileDevice,
      openWalletChooser,
    } from "{{ site.baseurl }}/assets/web3/foundation.js";
    import { createTxFixture } from "{{ site.baseurl }}/assets/web3/tx/index.js";
    import { getTxErrorMessage } from "{{ site.baseurl }}/assets/web3/tx/errors.js";
    import { getWeb3Config } from "{{ site.baseurl }}/assets/web3/config.js";
    import { purchaseSquare } from "{{ site.baseurl }}/assets/web3/services/primary.js";
    import { buildTxUrl } from "{{ site.baseurl }}/assets/web3/services/explorer-links.js";
    import { loadSquareData } from "{{ site.baseurl }}/assets/js/square-data.js";

    // Elements and state //////////////////////////////////////////////////////////////////////////////////////////////
    const squareNumberWithNumberSignSpan = document.getElementById("square-number-with-number-sign");
    const squareNumberInput = document.getElementById("square-number");
    const chooseListButton = document.getElementById("square-choose-list");
    const chooseBillboardButton = document.getElementById("square-choose-billboard");
    const mintButton = document.getElementById("mint");
    const pickASquareDiv = document.getElementById("pick-a-square");
    const mintSelectedSquareDiv = document.getElementById("mint-selected-square");
    const mintSuccessDiv = document.getElementById("mint-success");
    const personalizeNowLink = document.getElementById("personalize-now");
    const mintAnotherButton = document.getElementById("mint-another");
    const openWalletButton = document.getElementById("open-wallet-app");
    const txFixtureDiv = document.getElementById("tx-fixture");
    const { pricing } = getWeb3Config();
    const txUi = createTxFixture({
      target: txFixtureDiv,
      pricing,
      mode: "mint",
      title: "Mint status",
    });
    let squareNumber;
    let squarePersonalizations;
    let squareExtra;
    let lastMintedSquare = null;
    let currentWagmi = null; // Track current wagmi client for button visibility
    const skipAvailabilityCheck = Boolean(window.__E2E_SKIP_AVAILABILITY_CHECK);

    const baseurl = window.SITE_BASEURL || '';
    const buildPersonalizeHref = (squareId) => {
      if (!squareId) return baseurl + "/personalize-modern";
      return `${baseurl}/personalize-modern?square=${squareId}`;
    };

    const showMintState = () => {
      mintSuccessDiv.style.display = "none";
      pickASquareDiv.style.display = "block";
      mintSelectedSquareDiv.style.display = "none";
      squareNumberInput.value = "";
      squareNumber = null;
      txUi.reset();
    };

    const showSuccessState = (squareId) => {
      pickASquareDiv.style.display = "none";
      mintSelectedSquareDiv.style.display = "none";
      mintSuccessDiv.style.display = "block";
      const href = buildPersonalizeHref(squareId);
      personalizeNowLink.href = href;
    };

    // Load square data for availability checks ////////////////////////////////////////////////////////////////////////
    loadSquareData().then(({ personalizations, extra }) => {
      squarePersonalizations = personalizations;
      squareExtra = extra;
    }).catch((error) => {
      console.error("Failed to load square data", error);
    });

    // Attach choosers /////////////////////////////////////////////////////////////////////////////////////////////////
    if (chooseListButton) {
      let listChooserHandle;
      const ensureListChooser = async () => {
        if (listChooserHandle) return listChooserHandle;
        const module = await import(`${baseurl}/assets/square-lookup/list.js`);
        listChooserHandle = module.attachListChooser({
          input: squareNumberInput,
          trigger: chooseListButton,
          filter: (_id, ctx) => !ctx.extra,
          title: "Choose an available Square",
          description: "Only unminted Squares are shown.",
        });
        return listChooserHandle;
      };

      const handleChooseListClick = async (event) => {
        event.preventDefault();
        event.stopPropagation();
        try {
          const chooser = await ensureListChooser();
          chooser.open();
          chooseListButton.removeEventListener("click", handleChooseListClick);
        } catch (error) {
          console.error("Failed to load the list chooser", error);
          alert("Unable to open the chooser right now.");
        }
      };

      chooseListButton.addEventListener("click", handleChooseListClick);
    }

    if (chooseBillboardButton) {
      let billboardChooserHandle;
      const ensureBillboardChooser = async () => {
        if (billboardChooserHandle) return billboardChooserHandle;
        const module = await import(`${baseurl}/assets/billboard/wrappers/modal-chooser.js`);
        billboardChooserHandle = module.attachBillboardChooser({
          input: squareNumberInput,
          trigger: chooseBillboardButton,
          filter: (_id, ctx) => !ctx.extra, // only unminted
          title: "Choose Square from billboard",
          tooltipMode: "buy",
        });
        return billboardChooserHandle;
      };

      const handleChooseBillboardClick = async (event) => {
        event.preventDefault();
        event.stopPropagation();
        try {
          const chooser = await ensureBillboardChooser();
          chooser.open();
          chooseBillboardButton.removeEventListener("click", handleChooseBillboardClick);
        } catch (error) {
          console.error("Failed to load the billboard chooser", error);
          alert("Unable to open the chooser right now.");
        }
      };

      chooseBillboardButton.addEventListener("click", handleChooseBillboardClick);
    }

    // Validate Square number //////////////////////////////////////////////////////////////////////////////////////////
    squareNumberInput.addEventListener("input", () => {
      squareNumber = null;
      const value = parseInt(squareNumberInput.value);
      if (isNaN(value) || value < 1 || value > 10000) {
        return alert("Invalid Square number, please enter a number between 1 and 10000.");
      }
      squareNumber = value;
    });

    // Handle select Square button /////////////////////////////////////////////////////////////////////////////////////
    document.getElementById("select-square").addEventListener("click", () => {
      if (!squareNumber) {
        return alert("Please enter a Square number.");
      }
      // If the personalizations are loaded, check that the Square is available
      if (!skipAvailabilityCheck) {
        if (squareExtra && squareExtra[squareNumber - 1]) {
          return alert("Sorry, Square " + squareNumber + " was already purchased.");
        }
        if (squarePersonalizations && squarePersonalizations[squareNumber - 1]) {
          return alert("Sorry, Square " + squareNumber + " was already purchased.");
        }
      }
      pickASquareDiv.style.display = "none";
      mintSelectedSquareDiv.style.display = "block";
      squareNumberWithNumberSignSpan.innerText = "#" + squareNumber;
    });

    if (mintAnotherButton) {
      mintAnotherButton.addEventListener("click", () => {
        showMintState();
      });
    }

    // Handle ?square= query parameter /////////////////////////////////////////////////////////////////////////////////
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("square")) {
      squareNumberInput.value = urlParams.get("square");
      squareNumberInput.dispatchEvent(new Event("input"));
      //document.getElementById("select-square").click(); let the customer click it, by then the personalizations will be loaded
    }

    // Open wallet button - shows on mobile when connected via WalletConnect
    const updateOpenWalletButton = () => {
      if (!openWalletButton) return;
      const isWalletConnect = currentWagmi?.getAccount?.()?.connector?.id === "walletConnect";
      const showButton = isMobileDevice() && isWalletConnect;
      openWalletButton.style.display = showButton ? "inline-block" : "none";
    };

    if (openWalletButton) {
      updateOpenWalletButton();
      openWalletButton.addEventListener("click", () => {
        // Opens OS app chooser with placeholder URI (no real session data exposed)
        openWalletChooser();
      });
    }

    // Handle mint button ///////////////////////////////////////////////////////////////////////////////////////////////
    mintButton.addEventListener("click", async () => {
      if (!squareNumber) {
        return alert("Please enter a Square number.");
      }
      txUi.startProcessing(`Minting Square #${squareNumber}. Confirm in your wallet to continue.`);
      const doSendTransaction = async (wagmi) => {
        const isWalletConnect = wagmi?.getAccount?.()?.connector?.id === "walletConnect";
        txUi.setWalletContext({
          isWalletConnect,
        });
        // Trigger wallet app open on mobile for WalletConnect
        if (isMobileDevice() && isWalletConnect) {
          openWalletChooser();
        }
        let result;
        try {
          result = await purchaseSquare(squareNumber, wagmi);
          const pendingUrl = buildTxUrl(result.hash);
          txUi.addPending(result.hash, pendingUrl);
          const transaction = await wagmi.waitForTransaction({ hash: result.hash });
          const txUrl = buildTxUrl(transaction.transactionHash);
          lastMintedSquare = squareNumber;
          showSuccessState(squareNumber);
          const personalizeHref = buildPersonalizeHref(squareNumber);
          txUi.markSuccess(
            transaction.transactionHash,
            txUrl,
            `Transaction confirmed. Next, go to the <a href="${personalizeHref}" target="_blank" rel="noreferrer" style="text-decoration: underline;">personalize page</a> to personalize your Square.`,
            { trusted: true }
          );
        } catch (error) {
          console.log(error);
          const message = getTxErrorMessage(error, { isWalletConnect });
          txUi.markError(message);
          return alert(message);
        }
      };
      await ensureConnected(async (clients) => {
        currentWagmi = clients;
        updateOpenWalletButton();
        await ensureCorrectNetwork(clients);
        const { activeNetwork } = getWeb3Config();
        const account = clients.getAccount?.();
        if (account?.address) {
          txUi.setBalanceContext({
            address: account.address,
            chainId: activeNetwork.chainId,
            fetcher: (addr, chain) => clients.fetchBalance({ address: addr, chainId: chain }),
          });
        }
        await doSendTransaction(clients);
      });
    });
  </script>
  <script src="{{ site.baseurl }}/assets/js/pwa-init.js"></script>
</body>

</html>
